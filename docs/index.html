<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ベイブレードX パーツ計算機</title>
    <link rel="manifest" href="./manifest.json">
    <link rel="stylesheet" href="./style.css">
    <meta name="theme-color" content="#007bff">
    <link rel="shortcut icon" href="./images/favicon.ico" />

</head>
<body>
    <h1>ベイブレードX パーツ<ruby><rb>計<rt>けい</rt></rb><rb>算<rt>さん</rt></rb><rb>機<rt>き</rt></rb></ruby></h1>
    
    <div id="line"><button class="line-button active" data-line="basic">BX/UX</button><button class="line-button" data-line="cx">CX</button></div>

    <div id="basic" class="line-tabs">
    <div class="tabs">
        <button class="tab-button active" data-tab="blade">ブレード</button>
        <button class="tab-button" data-tab="ratchet">ラチェット</button>
        <button class="tab-button" data-tab="bits">ビット</button>
    </div>
    </div>
    
    <div id="cx" class="line-tabs">
    <div class="tabs">
        <button class="tab-button active" data-tab="lock">チップ</button>
        <button class="tab-button" data-tab="mainBlade">メイン</button>
        <button class="tab-button" data-tab="assistBlade">アシスト</button>
        <button class="tab-button" data-tab="ratchet">ラチェット</button>
        <button class="tab-button" data-tab="bits">ビット</button>
    </div>
    </div>


    <div id="lock" class="tab-content">
        <table id="lockTable">
            <thead>
                <tr>
                    <th data-sort-key="name"><ruby>名前(なまえ) <span class="sort-arrow"></span></th>
                    <th data-sort-key="weight">重さ(おもさ) <span class="sort-arrow"></span></th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <div id="mainBlade" class="tab-content">
        <table id="mainBladeTable">
            <thead>
                <tr>
                    <th data-sort-key="name"><ruby>名前(なまえ) <span class="sort-arrow"></span></th>
                    <th data-sort-key="size"><ruby><rb>大</rb><rt>おお</rt></ruby>きさ <span class="sort-arrow"></span></th>
                    <th data-sort-key="weight">重さ(おもさ) <span class="sort-arrow"></span></th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <div id="assistBlade" class="tab-content">
        <table id="assistBladeTable">
            <thead>
                <tr>
                    <th data-sort-key="name"><ruby>名前(なまえ) <span class="sort-arrow"></span></th>
                    <th data-sort-key="size"><ruby><rb>大</rb><rt>おお</rt></ruby>きさ <span class="sort-arrow"></span></th>
                    <th data-sort-key="weight">重さ(おもさ) <span class="sort-arrow"></span></th>
                    <th data-sort-key="height">高さ(たかさ) <span class="sort-arrow"></span></th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>


    <div id="blade" class="tab-content active">
        <table id="bladeTable">
            <thead>
                <tr>
                    <th data-sort-key="name"><ruby>名前(なまえ) <span class="sort-arrow"></span></th>
                    <th data-sort-key="height">高さ(たかさ) <span class="sort-arrow"></span></th>
                    <th data-sort-key="weight">重さ(おもさ) <span class="sort-arrow"></span></th>
                    <th>注釈(ちゅうしゃく)</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <div id="ratchet" class="tab-content">
        <table id="ratchetTable">
            <thead>
                <tr>
                    <th data-sort-key="name">名前 <span class="sort-arrow"></span></th>
                    <th data-sort-key="tooth">歯数 <span class="sort-arrow"></span></th>
                    <th data-sort-key="height">高さ <span class="sort-arrow"></span></th>
                    <th data-sort-key="weight">重さ <span class="sort-arrow"></span></th>
                </tr>
            </thead>
            <tbody>
                </tbody>
        </table>
    </div>

    <div id="bits" class="tab-content">
        <table id="bitsTable">
            <thead>
                <tr>
                    <th data-sort-key="name">名前 <span class="sort-arrow"></span></th>
                    <th data-sort-key="tooth">歯数 <span class="sort-arrow"></span></th>
                    <th data-sort-key="burst_resistance">バースト耐性 <span class="sort-arrow"></span></th>
                    <th data-sort-key="height">高さ <span class="sort-arrow"></span></th>
                    <th data-sort-key="exposure_height">露出高さ <span class="sort-arrow"></span></th>
                    <th data-sort-key="weight">重さ <span class="sort-arrow"></span></th>
                    <th>注釈</th>
                </tr>
            </thead>
            <tbody>
                </tbody>
        </table>
    </div>



    <div id="selectionResultsContainer" class="selection-results-container hidden">
        <button id="toggleSelectionResults" class="toggle-button">◀︎</button>
        <div class="selection-results-content">
            <h2 id="selectedTotalName">----</h2>
            <p><strong>ブレード: <span id="selectedBlade">----</span></strong></p>
            <p><strong>ラチェット: <span id="selectedRatchet">----</span></strong></p>
            <p><strong>ビット: <span id="selectedBit">----</span></strong></p>
            <p><strong><ruby><rb>回転<rt>かいてん</rt></rb></ruby> : <span id="turnType"></span></strong></p>
            <p><strong>バースト<ruby><rb>耐<rt>たい</rt></rb><rb>性<rt>せい</rt></rb></ruby> : <span id="totalBurstResistance">0</span></strong></p>
            <p><strong>ラチェット<ruby><rb>歯<rt>は</rt></rb><rb>数<rt>すう</rt></rb></ruby> : <span id="ratchetToothCount">0</span></strong></p>
            <p><strong>ビット<ruby><rb>歯<rt>は</rt></rb><rb>数<rt>すう</rt></rb></ruby> : <span id="bitToothCount">0</span></strong></p>
            <p><strong><ruby><rb>合計重量<rt>ごうけうじゅうりょう</rt></rb></ruby> : <span id="totalWeight">0.0</span>g</strong></p>
            <p><strong>ブレードまでの<ruby><rb>高<rt>たか</rt></rb></ruby>さ : <span id="totalHeight">0.0</span>mm</strong></p>
            <p style="text-align:center"><button id="resetSelection">リセット</button></p>
        </div>
    </div>

    <script type="module" src="./script.mjs"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('Service Worker registered with scope:', registration.scope);
                    })
                    .catch(err => {
                        console.log('Service Worker registration failed:', err);
                    });
            });
        }
    </script>
</body>
</html>